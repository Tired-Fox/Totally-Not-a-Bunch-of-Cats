---
import "./tm.scss";
import KittyImage from "/images/kitty.jpg";

import { FAIcon } from "../FAIcon";
import { Admonition } from "../admonition/admonition";

import { members } from "../../data/tm.json";

// Get all images from pfp directory
const images = (await Astro.glob("/public/images/pfp/*.png")).map((pfp) =>
    pfp.default.split("/public/").pop()
);

let pfps = {};

images.forEach((image) => {
    pfps[image.split("\\").pop().split("/").pop().split(".")[0]] = image;
});

console.log(pfps);
---

<div class="tm">
    {
        members.map((member) => (
            <div>
                <img
                    class="pfp"
                    src={pfps[member.pfp]}
                    alt={member.name + "'s' Profile Image"}
                />
                <p class="tm-name">{member.name}</p>
                <p class="tm-title">{member.title}</p>
                <div class="tm-socials">
                    {member.socials.map((social) => (
                        <a
                            href={social.link}
                            target="_blank"
                            aria-label={`${member.name}'s ${social.name} Link'`}
                        >
                            <FAIcon
                                icon={social.icon}
                                class={social.class + " tm-social"}
                                client:visible
                            />
                        </a>
                    ))}
                </div>
            </div>
        ))
    }
</div>
