---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE } from "../consts";
import Icon from "astro-icon";
import { Toaster } from "./solid/toaster/Toaster";
---

<script>
  const headerNav = document.getElementById("header-nav");
  const toggleButtons = document.getElementsByClassName("toggle-menu");
  console.log(toggleButtons);
  const toggleMenu = () => {
    if (headerNav) {
      headerNav.classList.toggle("!w-0");
      headerNav.classList.toggle("border-transparent");
    }
  };

  for (const button of toggleButtons) {
    button.addEventListener("click", toggleMenu);
  }
</script>

<header
  class="sticky top-0 w-full z-10 flex justify-end"
  transition:animate="none"
>
  <div
    class="mt-2 mr-3 w-12 h-12 bg-slate-100 rounded-full shadow-md border-2 border-dashed border-slate-300"
  >
    <button
      type="button"
      class="toggle-menu w-full h-full flex justify-center items-center z-30"
      title="Open menu"
    >
      <Icon name="jam:menu" class="w-8 h-8" />
    </button>
  </div>

  <nav
    id="header-nav"
    class="transition-[width] ease-out duration-200 absolute w-screen md:max-w-[60ch] h-screen h-[100dvh] top-0 right-0 bg-slate-100 md:rounded-l-lg shadow-lg shadow-slate-800 border-y-2 border-l-2 border-dashed border-slate-400 z-20 overflow-hidden !w-0 border-transparent flex flex-col items-end"
  >
    <div class="w-12 h-12 mt-4 mr-1">
      <button
        class="toggle-menu"
        type="button"
        class="w-full h-full flex justify-center items-center"
      >
        <Icon name="jam:close" class="w-8 h-8 text-slate-900" />
      </button>
    </div>
    <div class="w-full h-full flex flex-col justify-center items-center">
      <em class="text-slate-700/40 text-3xl font-bold">Menu</em>
      <ul class="mt-2 text-lg list-disc list-inside">
        <li>
          <HeaderLink href="/" class="h-fit">Home</HeaderLink>
        </li>
        <li><HeaderLink href="/blog" class="h-fit">Blog</HeaderLink></li>
      </ul>
    </div>
  </nav>
  <Toaster client:only/>
</header>
